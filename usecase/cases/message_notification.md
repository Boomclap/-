# 消息推送与通知管理用例

| 项目 | 内容 |
|------|------|
| 用例名称 | 消息推送与通知管理 |
| 简要描述 | 系统提供实时消息推送功能，通知用户系统事件和任务状态变更，并支持消息查看、标记和管理 |
| 参与者 | 普通用户 |
| 相关用例 | - 批量上传文献<br>- 文献解析<br>- 文献对齐入库<br>- 系统更新 |
| 前置条件 | 1. 用户已登录系统<br>2. 系统存在需要通知的事件（如任务完成、文献解析结果等） |
| 后置条件 | 1. 消息被成功推送给用户<br>2. 用户可查看和管理所有消息<br>3. 消息阅读状态正确更新 |
| 基本事件流 | 1. 系统生成消息事件（任务完成、系统更新等）<br>2. 系统更新用户未读消息计数并在导航栏显示<br>3. 用户点击导航栏消息图标<br>4. 系统显示消息下拉列表，包含最近的未读和已读消息<br>5. 用户查看消息内容<br>6. 系统自动将查看过的消息标记为已读<br>7. 用户点击"查看所有消息"<br>8. 系统显示消息中心页面<br>9. 用户可以执行以下操作：<br>   - 按类型筛选消息（全部/未读/系统通知/错误警告）<br>   - 标记单条消息为已读<br>   - 全部标记为已读<br>   - 删除单条消息<br>   - 批量选择并删除消息<br>10. 系统实时更新消息状态和未读计数 |
| 备选事件流 | **A-1 无未读消息**<br>- 系统不显示未读消息计数<br><br>**A-2 消息删除确认**<br>- 用户点击删除消息按钮<br>- 系统显示确认对话框<br>- 用户确认删除<br>- 系统删除消息<br><br>**A-3 消息中心筛选**<br>- 用户点击消息类型标签<br>- 系统根据选择的类型筛选并显示相应消息 |
| 补充约束-数据需求 | **D-1 消息字段包含：**<br>- 消息ID<br>- 消息标题<br>- 消息内容<br>- 消息类型（成功/失败/信息/警告）<br>- 消息状态（已读/未读）<br>- 关联对象（如文献ID、任务ID等）<br>- 创建时间<br>- 阅读时间（如已读）<br><br>**D-2 消息类型定义：**<br>- 成功：表示操作成功完成（如"文献对齐入库成功"）<br>- 失败：表示操作失败（如"文献解析失败"）<br>- 信息：系统通知（如"系统更新完成"）<br>- 警告：需要用户注意的事项（如"存储空间不足"） |
| 补充约束-业务规则 | **B-1 消息推送规则**<br>- 系统最多显示3条未读消息数量，超过时显示"3+"<br>- 消息下拉列表最多显示5条最新消息<br>- 所有消息保留期为30天，超过期限自动归档<br><br>**B-2 消息中心分页规则**<br>- 消息中心每页显示10条消息<br>- 按时间倒序排列，最新消息显示在前<br><br>**B-3 消息通知时机**<br>- 批量上传任务完成或失败时<br>- 文献解析完成或失败时<br>- 文献对齐入库完成时<br>- 系统更新完成时<br>- 存储空间不足时（低于10%） |
| 待解决问题 | 1. 是否需要支持消息优先级设置<br>2. 是否需要支持邮件/短信等外部通知渠道<br>3. 消息归档后的查询机制 |
| 相关图 | 建议添加以下流程图：<br>1. 消息推送流程图<br>2. 消息状态转换图<br>3. 消息中心界面交互图 | 